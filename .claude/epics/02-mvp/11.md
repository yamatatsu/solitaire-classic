---
name: Game Engine TDD - Game state atoms and stores
status: open
created: 2025-09-19T07:43:36Z
updated: 2025-09-19T08:01:17Z
depends_on: [10]
parallel: false
conflicts_with: []
---

# Task: Game Engine TDD - Game state atoms and stores

## Description
Test-driven implementation of Jotai atoms in features/game/stores/. Create comprehensive state management for solitaire game including tableau, foundations, stock, and waste piles with proper state transitions and validation.

## Acceptance Criteria
- [ ] Jotai atoms created for tableau, foundations, stock, waste
- [ ] State management tests written and passing
- [ ] Game state properly organized in stores/
- [ ] State transitions properly implemented
- [ ] Atom dependencies correctly configured
- [ ] State persistence hooks implemented

## Technical Details
- Implement Jotai atoms following bulletproof-react structure
- Create atoms for: tableauAtom, foundationsAtom, stockAtom, wasteAtom
- Implement derived atoms for computed state
- Use atomic pattern for state updates
- Implement state validation and error handling
- Key files: features/game/stores/index.ts, features/game/stores/__tests__/

## Dependencies
- [ ] Task 003 must be completed (Card models and types)
- [ ] Jotai library installation and configuration
- [ ] TypeScript types from previous task

## Effort Estimate
- Size: M
- Hours: 16
- Parallel: false

## Definition of Done
- [ ] Code implemented
- [ ] Tests written and passing
- [ ] Documentation updated
- [ ] Code reviewed
- [ ] All atoms properly exported
- [ ] State transitions thoroughly tested
- [ ] Performance optimized with proper atom splitting
